-- Products Table
-- Stores information about the medicines and other products in your inventory.
CREATE TABLE products (
  id BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  name TEXT NOT NULL,
  category TEXT,
  quantity INTEGER NOT NULL,
  price NUMERIC NOT NULL,
  expireDate DATE,
  productType TEXT,
  description TEXT,
  status TEXT DEFAULT 'Available',
  medicineId TEXT
);

-- Sales Table
-- Records each sale transaction.
CREATE TABLE sales (
  id BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  total_amount NUMERIC NOT NULL,
  discount_applied BOOLEAN DEFAULT FALSE
);

-- Sale Items Table
-- Links products to sales, allowing for a many-to-many relationship.
CREATE TABLE sale_items (
  id BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  sale_id BIGINT,
  product_id BIGINT,
  quantity INTEGER NOT NULL,
  price_at_sale NUMERIC NOT NULL,
  CONSTRAINT fk_sale FOREIGN KEY(sale_id) REFERENCES sales(id),
  CONSTRAINT fk_product FOREIGN KEY(product_id) REFERENCES products(id)
);

-- Branding Table
-- Stores information about your pharmacy's branding, such as the logo and name.
CREATE TABLE branding (
  id BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  name TEXT,
  logo_url TEXT
);

-- Avatars Table
-- For storing user avatars.
CREATE TABLE avatars (
  id BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  fileName TEXT,
  url TEXT
);